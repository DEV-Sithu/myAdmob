## App Open Ads အတွက် လုပ်ဆောင်ရမည့်အချက်များ Code snippets များ နှင့် ဆောင်ရန်ရှောင်ရန်များ

##### Admob ရဲ့ AppOpen Ads ဆိုတာဘာလဲ
<p>AppOpen Ads သည် Google Admob ၏ ကြော်ငြာဖော်မတ်တစ်မျိုးဖြစ်ပြီး အသုံးပြုသူများ အက်ပ်ကိုဖွင့်သည့်အခါ (သို့) အက်ပ်သို့ပြန်လာသည့်အခါတွင် ဖန်သားပြင်အပြည့် ကြော်ငြာများ ကိုပြသပေးသည်။ ၎င်းတို့ကို အက်ပ်၏အစနှင့် အဆုံးတွင် အဓိကထားအသုံးပြုပြီး ဝင်ငွေရရှိရန် ရည်ရွယ်သည်။</p>

<br>

#### အဓိက လက္ခဏာများ
1. အချိန်ကွက်
    * အက်ပ်စတင်ဖွင့်ချိန် (သို့) နောက်ခံမှ ပြန်လာချိန် (Foreground) တွင် အလိုအလျောက်ပြသသည်။
    * ဥပမာ: အက်ပ်ကိုပထမဆုံးအကြိမ်ဖွင့်ခြင်း၊ ဖုန်းသော့ပိတ်ပြီးနောက် ပြန်ဖွင့်ခြင်း။

2. ဒီဇိုင်း
    * ဖန်သားပြင်အပြည့်ပြသပြီး အက်ပ်၏ UI နှင့်လိုက်ဖက်သော ဒီဇိုင်းရှိသည်။
    * ကြော်ငြာပိတ်ရန် "Skip" ခလုတ် (သို့) သီးသန့်အချိန်ကာလပြီးနောက် အလိုအလျောက်ပိတ်သည်။
3. အသုံးပြုရန် သင့်တော်သော အခြေအနေများ
    * အက်ပ်အသုံးပြုမှုကို မထိခိုက်စေဘဲ အချိန်အနည်းငယ်ကြာသည့် အက်ပ်များ (ဥပမာ - ဂိမ်းမစခင်၊ သတင်းဖတ်ရန် စောင့်နေချိန်)။
<br>

##### သတိပြုရန် အချက်များ
* အသုံးပြုသူ အတွေ့အကြုံ (UX): ကြော်ငြာကို အလွန်အကျွံမပြသစေရန် (ဥပမာ - အက်ပ်ကိုတစ်မိနစ်တိုင်း ဖွင့်တိုင်းပြခြင်း)။
* အမြန်ပြသမှု: ကြော်ငြာတင်ချိန်ကြာပါက အက်ပ်စတင်ဖွင့်မှုနှောင့်နှေးနိုင်သည်။
* Google ၏ မူဝါဒ: ကြော်ငြာပြသမှုကို သဘာဝကျသော အချိန်ကွက်များတွင်သာ အသုံးပြုရန် (ဥပမာ - အက်ပ်ဖွင့်ပြီးချိန်တွင် တစ်ကြိမ်သာ)။

<br>

##### Interstitial Ads နှင့် ကွာခြားချက်
| AppOpen Ads | Interstitial Ads | 
| ------ | --- |
| အက်ပ်ဖွင့်ချိန်/ပြန်လာချိန်တွင်သာ     | အက်ပ်အတွင်း မည်သည့်အချိန်မဆို (ဥပမာ - ဂိမ်းအဆင့်ပြီးချိန်)  |
| အက်ပ်၏အစ/အဆုံးတွင် အာရုံစိုက်     | လုပ်ဆောင်ချက်အကြားတွင် အာရုံစိုက်  | 
	
<br>

##### အကျိုးကျေးဇူးများ
1. အက်ပ်အသုံးပြုမှု စတင်ချိန်တွင် ဝင်ငွေရရှိစေခြင်း။\
2. ကြော်ငြာကို သဘာဝကျသော အချိန်ကွက်တွင် ပြသခြင်း။

<br>

##### အကောင်းဆုံးအလေ့အကျင့်များ
1. ကြော်ငြာကို အက်ပ်စတင်ဖွင့်ပြီး တစ်ကြိမ်သာ ပြသပါ။
2. ကြော်ငြာတင်ချိန် Timeout (ဥပမာ - ၅စက္ကန့်) သတ်မှတ်ပါ။
3. ကြော်ငြာမပြခင် Splash Screen ဖြင့် အသုံးပြုသူအား စောင့်စေပါ။

<br>

___

# AdMob AppOpen Ads ကို Policy မထိခိုက်စေဘဲ မှန်ကန်စွာ ရေးသားနည်း

<p>AdMob AppOpen Ads ကို မှန်ကန်စွာ အကောင်အထည်ဖော်ရန် Google ၏ လမ်းညွှန်ချက်များ နှင့် အသုံးပြုသူအတွေ့အကြုံ (UX) ကို အထူးဂရုပြုရပါမည်။ အောက်ပါအချက်များကို လိုက်နာခြင်းဖြင့် Policy ချိုးဖောက်မှုမှ ရှောင်ရှားနိုင်ပါသည်။</p>


1. Google ၏ လမ်းညွှန်ချက်များကို တိကျစွာလိုက်နာပါ
   ###### AppOpen Ad ပုံစံအမှန်
   AppOpen Ad သည် ဖန်သားပြင်အပြည့် ဖြစ်ရပြီး၊ အက်ပ်၏ UI နှင့် လိုက်ဖက်သော ဒီဇိုင်းရှိရမည်။ ဥပမာ - ကြော်ငြာ၏ နောက်ခံတွင် အက်ပ်၏အကြောင်းအရာများ မပေါ်ရန် သေချာပါ။ 
     * မှားယွင်းသောဥပမာ: ကြော်ငြာ၏နောက်ခံတွင် အက်ပ်၏အဓိကစာမျက်နှာ (သို့) လှိုင်းများ ပေါ်နေခြင်း။
     * အကြံပြုချက်: Splash Screen ပြပြီးမှ AppOpen Ad ကိုပြပါ။

<br>

2. Splash Screen နှင့် ကြော်ငြာအချိန်ကိုက်ညှိပါ
   ###### Splash Screen ကို အရင်ပြပါ
   အက်ပ်စတင်ဖွင့်ချိန်တွင် Splash Screen ကို အရင်ပြသပြီးမှ AppOpen Ad ကို လှမ်းပြပါ။ Splash Screen မပြဘဲ ကြော်ငြာကိုတန်းပြပါက၊ အက်ပ်၏ UI နှင့် ကြော်ငြာတို့ 
   အပြန်အလှန်သက်ရောက်မှုဖြစ်ကာ Policy ချိုးဖောက်နိုင်သည်
<br>

3. ကြော်ငငြာပြသမှုကို သဘာဝကျအောင်ထိန်းပါ
   ###### အလွန်အကျွံမပြပါနှင့်
    * အက်ပ်ကိုဖွင့်တိုင်း (သို့) နောက်ခံမှပြန်လာတိုင်း AppOpen Ad ပြခြင်းကို ရှောင်ပါ။ ဥပမာ - အက်ပ်ဖွင့်ပြီးပါက တစ်ကြိမ်သာ ပြသပါ။
    * Timeout သတ်မှတ်ပါ: ကြော်ငြာတင်ချိန် ၅စက္ကန့်ထက်ကျော်ပါက အလိုအလျောက်ပိတ်ပါ
<br>

4. AdMob Policy Center ကိုအသုံးပြုပြီး ပြဿနာများကိုစောင့်ကြည့်ပါ
   ###### ပြဿနာရှာဖွေခြင်း
    AdMob Policy Center တွင် သင့်အက်ပ်နှင့်ဆိုင်သော သတိပေးချက်များ၊ ချိုးဖောက်မှုများကို စစ်ဆေးနိုင်သည်။ ဥပမာ - "Modified ad behavior" ကဲ့သို့သော သတိပေးချက် 
    များ , အကြံပြုချက်: Policy Center တွင် "Fix" ခလုတ်ကိုနှိပ်ပြီး လမ်းညွှန်ချက်များအတိုင်း ပြင်ဆင်ပါ။
<br>

5. Test Ads ကိုအသုံးပြုပြီး စမ်းသပ်ပါ
   ###### အမှန်တကယ်ကြော်ငြာများအစား Test ID သုံးပါ
   အက်ပ်ကို စမ်းသပ်ချိန်တွင် Admob Test ID ကိုသုံးပါ။ ဤသို့ပြုလုပ်ခြင်းဖြင့် မတော်တဆ Invalid Click ဖြစ်နိုင်ခြေကို လျှော့ချနိုင်သည် 
<br>

6. Policy ချိုးဖောက်မှုဖြစ်ပါက ပြန်လည်သုံးသပ်မှုတောင်းပါ
   ######  Appeal လုပ်နည်း
   ပြဿနာကို ပြင်ဆင်ပြီးပါက AdMob Policy Center မှတဆင့် ပြန်လည်သုံးသပ်မှုတောင်းပါ။ ပြင်ဆင်ချက်များကို အသေးစိတ်ရှင်းပြပါ (ဥပမာ - Splash Screen နှင့် Ad 
   Loading အဆင့်ကို ပြင်ထားကြောင်း)
<br>

___

## Code Snippet

```

import android.app.Activity
import android.app.Application
import android.content.Context
import android.os.Bundle
import android.util.Log
import com.google.android.gms.ads.AdError
import com.google.android.gms.ads.AdRequest
import com.google.android.gms.ads.FullScreenContentCallback
import com.google.android.gms.ads.LoadAdError
import com.google.android.gms.ads.MobileAds
import com.google.android.gms.ads.appopen.AppOpenAd


class MyApp : Application(), Application.ActivityLifecycleCallbacks {

    private var currentActivity: Activity? = null
    private var appOpenAdManager: AppOpenAdManager? = null

    override fun onCreate() {
        super.onCreate()
        MobileAds.initialize(this)
        registerActivityLifecycleCallbacks(this)

        appOpenAdManager = AppOpenAdManager()
    }

    override fun onActivityStarted(activity: Activity) {
        currentActivity = activity
        appOpenAdManager?.showAdIfAvailable(activity)
    }

    override fun onActivityResumed(activity: Activity) {
        currentActivity = activity
    }

    // Other lifecycle methods...
    override fun onActivityCreated(activity: Activity, savedInstanceState: Bundle?) {}
    override fun onActivityPaused(activity: Activity) {}
    override fun onActivityStopped(activity: Activity) {}
    override fun onActivitySaveInstanceState(activity: Activity, outState: Bundle) {}
    override fun onActivityDestroyed(activity: Activity) {}

    inner class AppOpenAdManager {
        private var appOpenAd: AppOpenAd? = null
        private var isLoadingAd = false
        private var isShowingAd = false
        private var loadTime: Long = 0

        fun showAdIfAvailable(activity: Activity) {
            if (isShowingAd) return
            if (isAdAvailable()) {
                appOpenAd?.fullScreenContentCallback = object : FullScreenContentCallback() {
                    override fun onAdShowedFullScreenContent() {
                        isShowingAd = true
                    }

                    override fun onAdDismissedFullScreenContent() {
                        appOpenAd = null
                        isShowingAd = false
                        loadAd(activity)
                    }

                    override fun onAdFailedToShowFullScreenContent(adError: AdError) {
                        isShowingAd = false
                    }
                }
                appOpenAd?.show(activity)
            } else {
                loadAd(activity)
            }
        }

        private fun loadAd(context: Context) {
            if (isLoadingAd || isAdAvailable()) return

            isLoadingAd = true
            val request = AdRequest.Builder().build()
            AppOpenAd.load(
                context,
                context.getString(R.string.open_ads), // Test Ad Unit ID
                request,
                AppOpenAd.APP_OPEN_AD_ORIENTATION_PORTRAIT,
                object : AppOpenAd.AppOpenAdLoadCallback() {
                    override fun onAdLoaded(ad: AppOpenAd) {
                        appOpenAd = ad
                        isLoadingAd = false
                        loadTime = System.currentTimeMillis()
                    }

                    override fun onAdFailedToLoad(adError: LoadAdError) {
                        isLoadingAd = false
                    }
                }
            )
        }

        private fun isAdAvailable(): Boolean {
            return appOpenAd != null && (System.currentTimeMillis() - loadTime < 4 * 60 * 60 * 1000)
        }
    }
}
```
#### Myapp ကို application ကနေပြန်ခေါပေးရင်ရပီ
```
<application
        android:name=".MyApp"/>
```
***


##### တကယ်လို့ splash screen ကို activityတစ်ခုအနေနဲ့ထားမယ်ဆိုရင် open ads နဲ့မညိအောင်ရေးနည်း
အောက်ပါ Kotlin code သည် Androidx Core SplashScreen library နှင့် AdMob App Open Ads ကို ပေါင်းစပ်အသုံးပြုနည်းကို ဥပမာပြထားပါသည်။ Policy နှင့်လိုက်နာပြီး အသုံးပြုသူအတွေ့အကြုံကို ဦးစားပေးထားသော နမူနာဖြစ်ပါသည်။

```
import android.content.Intent
import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.core.splashscreen.SplashScreen.Companion.installSplashScreen
import com.google.android.gms.ads.AdError
import com.google.android.gms.ads.AdRequest
import com.google.android.gms.ads.FullScreenContentCallback
import com.google.android.gms.ads.LoadAdError
import com.google.android.gms.ads.appopen.AppOpenAd

class SplashActivity : ComponentActivity() {

    private var appOpenAd: AppOpenAd? = null
    private val AD_UNIT_ID = "ca-app-pub-3940256099942544/3419835294" // Test Ad Unit ID
    private val AD_TIMEOUT = 5000L // 5 seconds

    override fun onCreate(savedInstanceState: Bundle?) {
        val splashScreen = installSplashScreen()
        super.onCreate(savedInstanceState)

        // Splash Screen ကို အနည်းဆုံး 1စက္ကန့်ပြပါ
        splashScreen.setKeepOnScreenCondition { true }

        loadAppOpenAd()
    }

    private fun loadAppOpenAd() {
        val loadCallback = object : AppOpenAd.AppOpenAdLoadCallback() {
            override fun onAdLoaded(ad: AppOpenAd) {
                appOpenAd = ad
                showAppOpenAd()
            }

            override fun onAdFailedToLoad(error: LoadAdError) {
                goToMainActivity()
            }
        }

        // App Open Ad ကို စတင် Load လုပ်ပါ
        AppOpenAd.load(
            this,
            AD_UNIT_ID,
            AdRequest.Builder().build(),
            AppOpenAd.APP_OPEN_AD_ORIENTATION_PORTRAIT,
            loadCallback
        )

        // Timeout သတ်မှတ်ပါ (5စက္ကန့်ကျော်ပါက Main Activity သို့သွားပါ)
        handler.postDelayed({ goToMainActivity() }, AD_TIMEOUT)
    }

    private fun showAppOpenAd() {
        appOpenAd?.fullScreenContentCallback = object : FullScreenContentCallback() {
            override fun onAdDismissedFullScreenContent() {
                goToMainActivity()
                appOpenAd = null
            }

            override fun onAdFailedToShowFullScreenContent(error: AdError) {
                goToMainActivity()
                appOpenAd = null
            }
        }

        appOpenAd?.show(this)
    }

    private fun goToMainActivity() {
        startActivity(Intent(this, MainActivity::class.java))
        finish()
    }
}
```

##### MyApplication.kt (App Open Ad ကို App Lifecycle နှင့်ချိတ်ပါ)

```
import android.app.Application
import androidx.lifecycle.Lifecycle
import androidx.lifecycle.LifecycleObserver
import androidx.lifecycle.OnLifecycleEvent
import androidx.lifecycle.ProcessLifecycleOwner

class MyApplication : Application(), LifecycleObserver {

    override fun onCreate() {
        super.onCreate()
        ProcessLifecycleOwner.get().lifecycle.addObserver(this)
    }

    @OnLifecycleEvent(Lifecycle.Event.ON_START)
    private fun onAppForegrounded() {
        // App နောက်ခံမှ ပြန်လာချိန်တွင် App Open Ad ပြပါ
        // (SplashActivity တွင်ဖွင့်ထားပါက မပြပါ)
    }
}
```


